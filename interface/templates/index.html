<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LeadTalk - Visualizador de Dados</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-green-500 min-h-screen flex flex-col items-center px-4 py-8">
  <div class="bg-white shadow-md rounded-xl w-full max-w-6xl p-6">
    <h1 class="text-3xl font-bold text-center mb-6 flex items-center justify-center gap-2">
      <span>ðŸ“¥</span> LeadTalk - Visualizador de Dados
    </h1>

    <!-- BARRA SUPERIOR -->
    <div class="flex flex-col lg:flex-row items-stretch gap-4 mb-4">
      <input id="buscaContato" placeholder="ðŸ” Pesquise um contato" onkeyup="filtrarContatos()"
        class="flex-1 p-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" />

      <textarea id="mensagemTexto" rows="2" placeholder="Mensagem personalizada..."
        class="flex-1 p-3 rounded-md border border-gray-300 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>

      <input type="number" id="intervalo" min="5" value="10" placeholder="Intervalo (seg)"
        class="w-32 p-3 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500" />

      <button onclick="confirmarEnvio()"
        class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-md transition w-full lg:w-auto whitespace-nowrap">
        ðŸ“¨ Enviar Mensagem
      </button>
    </div>

    <!-- LOG -->
    <pre id="saidaEnvio"
      class="bg-black text-green-400 p-4 rounded-lg font-mono text-sm max-h-64 overflow-y-auto mb-4"></pre>

    <div class="text-center mb-6">
      <button onclick="verLog()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition">
        ðŸ“„ Ver Log
      </button>
    </div>

    <!-- CONTATOS -->
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-3">Contatos ({{ contatos | length }})</h2>
      <ul id="listaContatos" class="space-y-2">
        {% for contato in contatos %}
        <li>
          <label class="flex items-center gap-2">
            <input type="checkbox" class="contato-checkbox" data-nome="{{ contato.nome }}"
              data-numero="{{ contato.numero }}">
            <span><strong>{{ contato.nome }}</strong> {{ contato.numero }}</span>
          </label>
        </li>
        {% endfor %}
      </ul>
    </section>

    <!-- GRUPOS -->
    <section>
      <h2 class="text-xl font-semibold mb-3">Grupos</h2>
      {% for grupo, membros in membros_grupos.items() %}
      <details class="bg-gray-100 rounded-md p-4 mb-3 open:shadow-md">
        <summary class="font-semibold cursor-pointer">{{ grupo }}</summary>
        <ul class="pl-4 mt-2 space-y-1">
          {% for membro in membros %}
          <li>
            <label class="flex items-center gap-2">
              <input type="checkbox" class="contato-checkbox" data-nome="{{ membro.nome }}"
                data-numero="{{ membro.numero }}">
              <span>{{ membro.nome }} - {{ membro.numero }}</span>
            </label>
          </li>
          {% endfor %}
        </ul>
      </details>
      {% endfor %}
    </section>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>